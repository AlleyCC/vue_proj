{"ast":null,"code":"import Modal from 'bootstrap/js/dist/modal';\nexport default {\n  props: {\n    product: {\n      type: Object,\n      default() {\n        return {};\n      }\n    }\n  },\n  data() {\n    return {\n      modal: {},\n      tempProduct: {}\n    };\n  },\n  watch: {\n    product() {\n      this.tempProduct = this.product;\n    }\n  },\n  methods: {\n    showModal() {\n      this.modal.show();\n    },\n    hideModal() {\n      this.modal.hide();\n    },\n    uploadFile() {\n      const uploadedFile = this.$refs.fileInput.files[0];\n      const formData = new FormData();\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/upload`;\n      formData.append('file-to-upload');\n      this.$http.post(api, {\n        data: this.tempProduct\n      }).then(res => {\n        console.log(res);\n        productComponent.hideModal();\n        this.getProducts();\n      });\n    }\n  },\n  mounted() {\n    this.modal = new Modal(this.$refs.modal);\n  }\n};","map":{"version":3,"names":["Modal","props","product","type","Object","default","data","modal","tempProduct","watch","methods","showModal","show","hideModal","hide","uploadFile","uploadedFile","$refs","fileInput","files","formData","FormData","api","process","env","VUE_APP_API","VUE_APP_PATH","append","$http","post","then","res","console","log","productComponent","getProducts","mounted"],"sources":["C:\\Users\\yifan\\Desktop\\homework\\vuejs\\alley-vueproj\\src\\components\\ProductModal.vue"],"sourcesContent":["<template>\n<!-- Modal -->\n<div class=\"modal fade\" id=\"exampleModal\" tabindex=\"-1\" aria-labelledby=\"exampleModalLabel\"\naria-hidden=\"true\" ref=\"modal\">\n  <!-- Modal -->\n<div class=\"modal-dialog modal-xl\" role=\"document\" ref=\"modal\">\n  <div class=\"modal-content border-0\">\n    <div class=\"modal-header bg-dark text-white\">\n      <h5 class=\"modal-title\" id=\"exampleModalLabel\">\n        <span>新增產品</span>\n      </h5>\n      <button type=\"button\" class=\"btn-close\"\n              data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\n    </div>\n    <div class=\"modal-body\">\n      <div class=\"row\">\n        <div class=\"col-sm-4\">\n          <div class=\"mb-3\">\n            <label for=\"image\" class=\"form-label\">輸入圖片網址\n            <input type=\"text\" class=\"form-control\" id=\"image\"\n                    placeholder=\"請輸入圖片連結\" v-model=\"tempProduct.imageUrl\">\n            </label>\n          </div>\n          <div class=\"mb-3\">\n            <label for=\"customFile\" class=\"form-label\">或 上傳圖片\n              <i class=\"fas fa-spinner fa-spin\"></i>\n\n            <input type=\"file\" id=\"customFile\" class=\"form-control\"\n            @change=\"uploadFile\" ref=\"fileInput\">\n            </label>\n          </div>\n          <img class=\"img-fluid\" alt=\"\">\n          <!-- 延伸技巧，多圖 -->\n        </div>\n        <div class=\"col-sm-8\">\n          <div class=\"mb-3\">\n            <label for=\"title\" class=\"form-label\">標題\n            <input type=\"text\" class=\"form-control\" id=\"title\"\n                    placeholder=\"請輸入標題\" v-model=\"tempProduct.title\">\n            </label>\n          </div>\n\n          <div class=\"row gx-2\">\n            <div class=\"mb-3 col-md-6\">\n              <label for=\"category\" class=\"form-label\">分類\n                <input type=\"text\" class=\"form-control\" id=\"category\"\n                      placeholder=\"請輸入分類\" v-model=\"tempProduct.category\">\n              </label>\n\n            </div>\n            <div class=\"mb-3 col-md-6\">\n              <label for=\"price\" class=\"form-label\">單位\n                 <input type=\"text\" class=\"form-control\" id=\"unit\"\n                      placeholder=\"請輸入單位\" v-model=\"tempProduct.unit\">\n              </label>\n\n            </div>\n          </div>\n\n          <div class=\"row gx-2\">\n            <div class=\"mb-3 col-md-6\">\n              <label for=\"origin_price\" class=\"form-label\">原價\n                <input type=\"number\" class=\"form-control\" id=\"origin_price\"\n                      placeholder=\"請輸入原價\" v-model=\"tempProduct.origin_price\">\n              </label>\n\n            </div>\n            <div class=\"mb-3 col-md-6\">\n              <label for=\"price\" class=\"form-label\">售價\n                <input type=\"number\" class=\"form-control\" id=\"price\"\n                      placeholder=\"請輸入售價\" v-model=\"tempProduct.price\">\n              </label>\n\n            </div>\n          </div>\n          <hr>\n\n          <div class=\"mb-3\">\n            <label for=\"description\" class=\"form-label\">產品描述\n              <textarea type=\"text\" class=\"form-control\" id=\"description\"\n                      placeholder=\"請輸入產品描述\" v-model=\"tempProduct.description\"></textarea></label>\n\n          </div>\n          <div class=\"mb-3\">\n            <label for=\"content\" class=\"form-label\">說明內容\n                <textarea type=\"text\" class=\"form-control\" id=\"content\"\n                      placeholder=\"請輸入產品說明內容\" v-model=\"tempProduct.content\"></textarea>\n            </label>\n\n          </div>\n          <div class=\"mb-3\">\n            <div class=\"form-check\">\n              <label class=\"form-check-label\" for=\"is_enabled\">\n              <input class=\"form-check-input\" type=\"checkbox\"\n                      :true-value=\"1\"\n                      :false-value=\"0\"\n                      id=\"is_enabled\" v-model=\"tempProduct.is_enabled\">\n\n                是否啟用\n              </label>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class=\"modal-footer\">\n      <button type=\"button\" class=\"btn btn-outline-secondary\"\n              data-bs-dismiss=\"modal\">取消\n      </button>\n      <button type=\"button\" class=\"btn btn-primary\" @click=\"$emit('update-product', tempProduct)\"\n      >確認</button>\n    </div>\n  </div>\n</div>\n</div>\n</template>\n\n<script>\nimport Modal from 'bootstrap/js/dist/modal';\n\nexport default {\n  props: {\n    product: {\n      type: Object,\n      default() { return {}; },\n    },\n  },\n  data() {\n    return {\n      modal: {},\n      tempProduct: {},\n    };\n  },\n  watch: {\n    product() {\n      this.tempProduct = this.product;\n    },\n  },\n  methods: {\n    showModal() {\n      this.modal.show();\n    },\n    hideModal() {\n      this.modal.hide();\n    },\n    uploadFile() {\n      const uploadedFile = this.$refs.fileInput.files[0];\n      const formData = new FormData();\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/upload`;\n      formData.append('file-to-upload',)\n      this.$http.post(api, { data: this.tempProduct })\n        .then((res) => {\n          console.log(res);\n          productComponent.hideModal();\n          this.getProducts();\n        });\n    },\n  },\n  mounted() {\n    this.modal = new Modal(this.$refs.modal);\n  },\n};\n</script>\n"],"mappings":"AAsHA,OAAOA,KAAI,MAAO,yBAAyB;AAE3C,eAAe;EACbC,KAAK,EAAE;IACLC,OAAO,EAAE;MACPC,IAAI,EAAEC,MAAM;MACZC,OAAOA,CAAA,EAAG;QAAE,OAAO,CAAC,CAAC;MAAE;IACzB;EACF,CAAC;EACDC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,KAAK,EAAE,CAAC,CAAC;MACTC,WAAW,EAAE,CAAC;IAChB,CAAC;EACH,CAAC;EACDC,KAAK,EAAE;IACLP,OAAOA,CAAA,EAAG;MACR,IAAI,CAACM,WAAU,GAAI,IAAI,CAACN,OAAO;IACjC;EACF,CAAC;EACDQ,OAAO,EAAE;IACPC,SAASA,CAAA,EAAG;MACV,IAAI,CAACJ,KAAK,CAACK,IAAI,CAAC,CAAC;IACnB,CAAC;IACDC,SAASA,CAAA,EAAG;MACV,IAAI,CAACN,KAAK,CAACO,IAAI,CAAC,CAAC;IACnB,CAAC;IACDC,UAAUA,CAAA,EAAG;MACX,MAAMC,YAAW,GAAI,IAAI,CAACC,KAAK,CAACC,SAAS,CAACC,KAAK,CAAC,CAAC,CAAC;MAClD,MAAMC,QAAO,GAAI,IAAIC,QAAQ,CAAC,CAAC;MAC/B,MAAMC,GAAE,GAAI,GAAGC,OAAO,CAACC,GAAG,CAACC,WAAW,OAAOF,OAAO,CAACC,GAAG,CAACE,YAAY,SAAS;MAC9EN,QAAQ,CAACO,MAAM,CAAC,gBAAiB;MACjC,IAAI,CAACC,KAAK,CAACC,IAAI,CAACP,GAAG,EAAE;QAAEhB,IAAI,EAAE,IAAI,CAACE;MAAY,CAAC,EAC5CsB,IAAI,CAAEC,GAAG,IAAK;QACbC,OAAO,CAACC,GAAG,CAACF,GAAG,CAAC;QAChBG,gBAAgB,CAACrB,SAAS,CAAC,CAAC;QAC5B,IAAI,CAACsB,WAAW,CAAC,CAAC;MACpB,CAAC,CAAC;IACN;EACF,CAAC;EACDC,OAAOA,CAAA,EAAG;IACR,IAAI,CAAC7B,KAAI,GAAI,IAAIP,KAAK,CAAC,IAAI,CAACiB,KAAK,CAACV,KAAK,CAAC;EAC1C;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}